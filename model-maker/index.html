<!DOCTYPE html>
<html lang="en">
<head>
    <title>
        DeepFusion
    </title>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700;800;900&display=swap" rel="stylesheet"> 
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet"> 

    <link rel="shortcut icon" type="image/x-icon" href="../favicon.ico">
</head>

<body id='base-canvas' style="display:flex; align-items: center; justify-content: center; height:100vh; flex-direction: column">
    
    <!-- to warn users about enabling js -->
    <div class="pagecontainer" style="display:flex;  justify-content: center; align-items: center;">
        <!-- bottom menu -->
        <div class='menu-container' style='
            width:calc(100vw - clamp(1rem, 17vw, 19rem) * 2); padding-bottom: 2.5vh; height:auto; bottom:0; right:clamp(1rem, 17vw, 19rem);
            display:flex; align-items: center; justify-content: center; flex-direction: column;' id="node-menu">
                <section style='margin-top:2vh'>
                    <h4 style='margin-left:2vw; margin-right:1vw'>Add Layers:</h4>
                </section>

                <section style='margin-top:0.5vh; display:flex; flex-direction: row'>
                    <button class='absolute-btn node-selection' id='input_node_add'>
                        <p>
                            Input
                        </p>
                    </button>
                    <button class='absolute-btn node-selection' id='output_node_add'>
                        <p>
                            Output
                        </p>
                    </button>

                    <!-- separator -->
                    <div class="vr"></div>

                    <button class='absolute-btn node-selection' id='dense_node_add'>
                        <p>
                            Dense
                        </p>
                    </button>
                    <button class='absolute-btn node-selection' id='act_node_add'>
                        <p>
                            Activation
                        </p>
                    </button>
                    <button class='absolute-btn node-selection' id='drop_node_add'>
                        <p>
                            Dropout
                        </p>
                    </button>
                </section>
        </div>

        <!-- right top menu -->
        <div class='menu-container' style='width:clamp(1rem, 17vw, 19rem); height:calc(100vh - 35vh); top:0; right:0;
            display:flex; align-items: center; justify-content: center;' id='node-editor'>
            <div class='node-menu-container' id='default-node-menu'>
                <p>
                    Click on a node to edit it
                </p>
            </div>

            <button style='position:absolute; bottom:1vh' id='del-selected' class='del-btn disable'
                    onClick = "delete_selected_node();" disabled>
                <p>
                    Delete Node
                </p>
            </button>
        </div>

        <!-- right bottom menu -->
        <div class='menu-container' style='width:clamp(1rem, 17vw, 19rem); height:35vh; bottom:0; right:0;
            display:flex; align-items: center; justify-content: flex-start; flex-direction: column;
            padding-top: 2vh; padding-bottom: 2vh'>
            <h4>
                Training Controls
            </h4>
            
            <hr style='width:30%; margin: 1vh 0 1vh 0'>

            <button id='check-net'>
                <p>
                    Check Network
                </p>
            </button>

            <button id='train-net' style="margin-top:2vh">
                <p>
                    Train Network
                </p>
            </button>

            <button id='test-net'>
                <p>
                    Test Network
                </p>
            </button>

            <button id='export-net' style="margin-top:2vh">
                <p>
                    Export Network
                </p>
            </button>
        </div>

        <!-- left top menu -->
        <div class='
            menu-container' style='width:clamp(1rem, 17vw, 19rem); height:calc(100vh - clamp(1rem, 7vh, 4rem) - 45vh); top:clamp(1rem, 7vh, 4rem); left:0;
            display:flex; align-items: center; justify-content: center; padding:0vh 0.5vw 0vh 0.5vw; flex-direction: column;'>

            <div class='terminal' id='dfterm'>
                <span style='margin:0.5vh 0 0 0'>Welcome to DeepFusion <span style='color:greenyellow'>3.0</span>.</span>
                <span>If you want to you can support this project on 
                    <a style='color:rgb(0, 153, 255); font-weight: 600;' href='https://github.com/LemonOrangeWasTaken/DeepFusion'>GitHub</a>
                    , or subscribe to my 
                    <a style='color:rgb(255, 68, 68); font-weight: 600;' href='https://www.youtube.com/channel/UCut2xeBl7HcPEPatqpEUoQw'>YouTube</a>.
                    Yes you can scroll on this makeshift terminal when it overflows.
                </span>
                <span style='margin:0'>---</span>
                <span class='info'>Type "help", "about", or "license" for more information</span>
            </div>
            
            <!-- terminal input section -->
            
            <section style='display:flex; width:100%; height:auto;'>
                <input type="text" class='terminal-in' id='term-input'
                    style="padding:0.7vh 0 0.7vh 0.5vw; font-family: 'Courier New', 'Courier', 'monospace';" placeholder=">>>">
                </input>
            </section>

        </div>

        <!-- left bottom menu -->
        <div class='
            menu-container' style='width:clamp(1rem, 17vw, 19rem); height:calc(100vh - clamp(1rem, 7vh, 4rem) - calc(100vh - clamp(1rem, 7vh, 4rem) - 45vh)); bottom:0; left:0;
            display:flex; align-items: center; justify-content: flex-start; padding-top:2vh; flex-direction: column;'>
            <h4>
                Training Parameters
            </h4>

            <hr style='width:30%; margin: 1vh 0 1vh 0'>

            <section class='input-parent-container'>
                <p class='unselectable section-text'>Validation Part (%):</p>
                <section class='slider-container'>
                    <input type="range" min="0" max="10" value="5" class="slider" id="val-part-slider">
                    <input type="number" class="number-box" id="val-part"> </input>
                </section>
            </section>

            <section class='input-parent-container'>
                <p class='unselectable section-text'>Testing Part (%):</p>
                <section class='slider-container'>
                    <input type="range" min="0" max="5" value="2" class="slider" id="test-part-slider">
                    <input type="number" class="number-box" id="test-part"> </input>
                </section>
            </section>

            <hr style='width:30%; margin: 1vh 0 1vh 0'>

            <section class='input-parent-container'>
                <p class='unselectable section-text'>Batch Size:</p>
                <section class='slider-container'>
                    <input type="range" min="1" max="100" value="25" class="slider" id="batch-part-slider">
                    <input type="number" class="number-box" id="batch-part"> </input>
                </section>
            </section>

            <section class='input-parent-container'>
                <p class='unselectable section-text'>Epoch Size:</p>
                <section class='slider-container'>
                    <input type="range" min="1" max="1500" value="150" class="slider" id="epoch-part-slider">
                    <input type="number" class="number-box" id="epoch-part"> </input>
                </section>
            </section>        
        </div>

        <!-- help btn -->
        <!-- <button class='subtle-btn' style='position:absolute; top:1vh; right:calc(clamp(1rem, 17vw, 19rem)  1vh);'>
            <h3 class='unselectable' style='cursor:pointer'>
                ?
            </h3>
        </button> -->
        
        <!-- return -->
        <a href='../'>
            <div class='menu-container logo' style='width:clamp(1rem, 17vw, 19rem); height:clamp(1rem, 7vh, 4rem); top:0; left:0; display:flex; align-items: center; justify-content: center'>
                <h2 class='unselectable' style='font-size: clamp(0.1rem, min(3vh, 1.3vw), 4rem); letter-spacing:3px; cursor:pointer'>
                    DeepFusion
                </h2>
            </div>
        </a>

        <!-- zoom control -->
        <section id="canvas-ctrl" style='position:absolute; top:1vh; display:flex; justify-content: center; align-items:center; flex-direction: column; z-index: 10;'>
            <section style='
                display:flex; flex-direction: row; justify-content: center; align-items: center; background: #181a1b7b; padding: 0.5vh 0 0.5vh 0;
                border-radius: clamp(0.1rem, min(1.3vw, 1.3vh), 2.5rem);
                -webkit-backdrop-filter: blur(6px); backdrop-filter: blur(6px); 
                box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.248), -5px 5px 20px 0px rgba(0, 0, 0, 0.17); border: 1px solid #373c3c'>

                <button id='reset-canvas' class='subtle-btn' title="Recenter Canvas">
                    <!-- recenter -->
                    <img style="width:35%; height:auto;" src="../re-center.svg" alt="Center">
                </button>
                
                <div class='vr' style='height: 4vh; position: relative; background-color: rgba(255, 255, 255, 0.412); z-index: 10; width:1px'></div>

                <button id='zoom-in' class='subtle-btn' title="Zoom In">
                    <!-- zoon in -->
                    <img style="width:30%; height:auto;" src="../zoom-in.svg" alt="Zoom In">
                </button>
                
                <button id='zoom-out' class='subtle-btn' title="Zoom Out">
                    <!-- zoon out -->
                    <img style="width:30%; height:auto;" src="../zoom-out.svg" alt="Zoom Out">
                </button>

                <button id='zoom-res' class='subtle-btn' title="Reset Zoom">
                    <!-- zoon reset -->
                    <img style="width:40%; height:auto;" src="../zoom-reset.svg" alt="Reset Zoom">
                </button>
            </section>
            <p id='zoom-scale' class='unselectable' style='color:white; opacity:1; margin-top:0.5vh; font-family: Montserrat'>
                100%
            </p>
        </section>

        <!-- position debug -->
        <section style='position: absolute; top: 0; right:clamp(1rem, 17vw, 19rem); margin-top:1vh; margin-right:1vh;
                display:flex; flex-direction: row; align-items:center'>
            <!-- location thing -->
            <p id='position_debug' class='unselectable' style='color:white; opacity:1; font-family: Montserrat; margin-left:0vw;'>
                0,0
            </p>
        </section>

        <!-- network name -->
        <section style='position: absolute; top: 0; left:clamp(1rem, 17vw, 19rem); margin-top:2vh; margin-left:2vh;
        display:flex; flex-direction: row; align-items:center'>
            <input id="networkname" maxlength="50" type="text" placeholder="untitled-network">
            </input>
        </section>
        
        <!-- canvas area -->
        <section id='canvas-drag' style='position:absolute; display:flex; justify-content: center; align-items:center;
        width:calc(100vw - clamp(1rem, 17vw, 19rem) * 2); left:clamp(1rem, 17vw, 19rem);
        height:calc(100vh - clamp(1rem, 10vh, 6rem)); top:0; border-radius: 1rem;'>

            <section id='main-canvas' style='position:absolute; display:flex; justify-content: center; align-items:center;
                    width:calc(100vw - clamp(1rem, 17vw, 19rem) * 2);
                    height:calc(100vh - clamp(1rem, 10vh, 6rem)); 
                    transition: transform 240ms cubic-bezier(0.260, 0.050, 0.250, 1.000),
                                background-position 500ms cubic-bezier(0.260, 0.050, 0.250, 1.000); border-radius: 1rem;
                    
                    background:url(../grid.svg);
                    background-position: 50% 50%; background-size: 50px 50px;'>
                
                <!-- for canvas tracking -->
                <div class='crosshair' id="functional-crosshair"></div>
                
                <div class='crosshair decorational-crosshair'
                        style='pointer-events: none; transition: all 500ms cubic-bezier(0.355, 0.010, 0.200, 1.010); z-index:1'>
                    <img src="../icon.svg" alt="DeepFusion" width="auto", height="auto",
                    style='opacity: 1; height: clamp(0.2rem, min(18vw, 18vh), 18rem);'>
                </div>
                
            </section>
        </section>
    </div>

    <noscript>
        <style type="text/css">
            .pagecontainer {display:none;}
        </style>
        <div class="noscriptmsg">
            <h1 style="font-family: arial; text-align: center; margin-bottom:2rem; cursor: text">
                ¯\_(ツ)_/¯
            </h1>
            <h2 style="letter-spacing:0; font-weight: 500; font-size: 2rem; cursor: text">
                You don't seem to have Javascript enabled...
            </h2>
            <h4 style="text-align:center; margin-top:1vh; font-weight: 400; font-size: 1rem">
                Fun fact: you need Javascript to make neural networks!
            </h4>
        </div>
    </noscript>    

    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@2.0.0/dist/tf.min.js"></script>
    <script src="../anime.min.js"></script>
    <script src="../json2html.min.js"></script>
    <script src="style.js"></script>
    <script src="node-templates.js"></script>
    <script src="menu-templates.js"></script>
    <script src="menu-handler.js"></script>
    <script src="events.js"></script>
    <script src="standards.js"></script>
    <script src="modeling.js"></script>
    <script src="terminal-handler.js"></script>
    <script src="edge-render.js"></script>
</body>
</html>